<!-- <!DOCTYPE html>
<html>

<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
</head>

<body>
    <canvas id="genresChart" style="width:100%;max-width:600px"></canvas>
    <script src="assets/js/statisticts.js"> </script>
</body>

</html> -->



<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Purchase Statistics</title>
    <!-- Include D3.js library -->
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <style>
        /* Add your CSS styles here */
    </style>
</head>

<body>
    <h1>Product Purchase Statistics</h1>
    <div id="chart"></div>

    <script>
        // Sample data (replace with your actual data)
        const reservations = [
            {
                date: "2023-08-01",
                products: [
                    { name: "Product A", quantity: 1 },
                    { name: "Product B", quantity: 4 },
                    { name: "Product C", quantity: 3 },
                    { name: "Product D", quantity: 10 },
                ],
            },
            {
                date: "2023-08-02",
                products: [
                    { name: "Product A", quantity: 5 },
                    { name: "Product B", quantity: 10 },
                    { name: "Product C", quantity: 7 },
                    { name: "Product D", quantity: 4 },
                ],
            },
            {
                date: "2023-08-03",
                products: [
                    { name: "Product A", quantity: 4 },
                    { name: "Product B", quantity: 3 },
                    { name: "Product C", quantity: 2 },
                    { name: "Product D", quantity: 1 },
                ],
            },
            {
                date: "2023-08-04",
                products: [
                    { name: "Product A", quantity: 1 },
                    { name: "Product B", quantity: 2 },
                    { name: "Product C", quantity: 3 },
                    { name: "Product D", quantity: 1 },
                ],
            },

        ];

        // Extract product data from reservations
        const productData = {};
        const productNames = Array.from(
            new Set(reservations.flatMap((r) => r.products.map((p) => p.name)))
        );

        reservations.forEach((reservation) => {
            reservation.products.forEach((product) => {
                const productName = product.name;
                if (!productData[productName]) {
                    productData[productName] = Array(reservations.length).fill(0);
                }
                const reservationIndex = reservations.findIndex(
                    (r) => r.date === reservation.date
                );
                productData[productName][reservationIndex] += product.quantity;
            });
        });

        // Create a bar chart using D3.js
        const width = 800;
        const height = 400;
        const svg = d3
            .select("#chart")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        const xScale = d3.scaleBand().domain(reservations.map((r) => r.date)).range([0, width]).padding(0.1);
        const yScale = d3.scaleLinear().domain([0, d3.max(Object.values(productData).flat())]).nice().range([height, 0]);

        svg
            .selectAll("g")
            .data(productNames)
            .enter()
            .append("g")
            .attr("transform", (d) => `translate(0,0)`)
            .selectAll("rect")
            .data((product) => productData[product])
            .enter()
            .append("rect")
            .attr("x", (d, i) => xScale(reservations[i].date))
            .attr("y", (d) => yScale(d))
            .attr("width", xScale.bandwidth())
            .attr("height", (d) => height - yScale(d))
            .attr("fill", (_, i) => d3.schemeCategory10[i % 10]);

        // Add axes
        svg.append("g").attr("transform", `translate(0, ${height})`).call(d3.axisBottom(xScale).tickFormat(d3.timeFormat("%Y-%m-%d")));
        svg.append("g").call(d3.axisLeft(yScale));

        // Add X-axis label
        svg
            .append("g")
            .attr("transform", `translate(${width / 2}, ${height + 40})`)
            .append("text")
            .style("text-anchor", "middle")
            .text("Date");

        // Add Y-axis label
        svg
            .append("g")
            .attr("transform", `translate(-50, ${height / 2}) rotate(-90)`)
            .append("text")
            .attr("dy", "1em")
            .style("text-anchor", "middle")
            .text("Amount of Product Bought");

        // Add legend
        const legend = svg
            .selectAll(".legend")
            .data(productNames)
            .enter()
            .append("g")
            .attr("class", "legend")
            .attr("transform", (_, i) => `translate(0,${i * 20})`);

        legend
            .append("rect")
            .attr("x", width - 18)
            .attr("width", 18)
            .attr("height", 18)
            .style("fill", (_, i) => d3.schemeCategory10[i % 10]);

        legend
            .append("text")
            .attr("x", width - 24)
            .attr("y", 9)
            .attr("dy", ".35em")
            .style("text-anchor", "end")
            .text((d) => d);
    </script>
</body>

</html>